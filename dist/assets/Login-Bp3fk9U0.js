import{j as e}from"./query-C_4itxqZ.js";import{r as i}from"./vendor-DvOFIV6I.js";import{o as f,r as y,a as j,u as w,b as v,s as p}from"./forms-ruxko64v.js";import{u as g,L as b,D as N,V as h}from"./index-D34PTdUV.js";import{a as E}from"./router-Cj1_4n67.js";import"./supabase-8hkAhPV2.js";import"./utils-BkLtITBR.js";import"./ui-DW4ydNWY.js";function k({title:a,titleId:o,...r},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":o},r),a?i.createElement("title",{id:o},a):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const L=i.forwardRef(k);function S({title:a,titleId:o,...r},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":o},r),a?i.createElement("title",{id:o},a):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const P=i.forwardRef(S);var C=function(a,o){for(var r={};a.length;){var s=a[0],d=s.code,c=s.message,t=s.path.join(".");if(!r[t])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];r[t]={message:l.message,type:l.code}}else r[t]={message:c,type:d};if("unionErrors"in s&&s.unionErrors.forEach(function(x){return x.errors.forEach(function(u){return a.push(u)})}),o){var n=r[t].types,m=n&&n[s.code];r[t]=j(t,o,r,d,m?[].concat(m,s.message):s.message)}a.shift()}return r},M=function(a,o,r){return r===void 0&&(r={}),function(s,d,c){try{return Promise.resolve(function(t,l){try{var n=Promise.resolve(a[r.mode==="sync"?"parse":"parseAsync"](s,o)).then(function(m){return c.shouldUseNativeValidation&&f({},c),{errors:{},values:r.raw?s:m}})}catch(m){return l(m)}return n&&n.then?n.then(void 0,l):n}(0,function(t){if(function(l){return Array.isArray(l?.errors)}(t))return{values:{},errors:y(C(t.errors,!c.shouldUseNativeValidation&&c.criteriaMode==="all"),c)};throw t}))}catch(t){return Promise.reject(t)}}};const A=v({email:p().email("Please enter a valid email address"),password:p().min(6,"Password must be at least 6 characters")}),T=()=>{const{signIn:a,isAuthenticated:o}=g(),[r,s]=i.useState(!1),[d,c]=i.useState(!1),{register:t,handleSubmit:l,formState:{errors:n}}=w({resolver:M(A)});if(o)return e.jsx(E,{to:"/",replace:!0});const m=async x=>{c(!0);try{await a(x.email,x.password),h.success("Welcome back!")}catch(u){console.error("Login error:",u),h.error(u instanceof Error?u.message:"Login failed")}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-primary-600 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:"MP"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-secondary-900",children:"Sign in to MaintainPro"}),e.jsx("p",{className:"mt-2 text-center text-sm text-secondary-600",children:"Manage your maintenance operations efficiently"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:l(m),children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-secondary-700",children:"Email address"}),e.jsx("input",{...t("email"),type:"email",autoComplete:"email",className:`mt-1 input ${n.email?"input-error":""}`,placeholder:"Enter your email"}),n.email&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:n.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-secondary-700",children:"Password"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{...t("password"),type:r?"text":"password",autoComplete:"current-password",className:`input pr-10 ${n.password?"input-error":""}`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!r),children:r?e.jsx(L,{className:"h-5 w-5 text-secondary-400"}):e.jsx(P,{className:"h-5 w-5 text-secondary-400"})})]}),n.password&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:n.password.message})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-secondary-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-secondary-700",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:d,className:"w-full btn-primary",children:d?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(b,{size:"sm",color:"white",className:"mr-2"}),"Signing in..."]}):"Sign in"})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-secondary-600",children:["Don't have an account?"," ",e.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Contact your administrator"})]})})]}),!1,e.jsx(N,{})]})})};export{T as default};
